- title('Home')
- robots('index', 'follow')

-# The Google maps Javascript needs to be included before the other javascript files, as some refer to Google (in particular, markermanager)
- content_for :javascript do
  %script{:src => GOOGLE_MAPS_API_URL, :type => 'text/javascript'}
- javascript("jquery.jmap", "map_markers")

.span-23.prepend-1.padding-top-10
  %h1{:style => 'color: #993300; font-weight: bold;'}== #{@featured_city.name} Places and Events
  
  %hr.space
  
  .span-10
    - unless @featured_events.blank?
      - @featured_events.each_with_index do |object, i|
        .span-10.letterbox-5.border_bottom[object]
          - case object.class.to_s
          - when 'Location'
            = render(:partial => 'search/location', :locals => {:location => object, :index => i})
          - when 'Event'
            = render(:partial => 'search/event', :locals => {:event => object, :index => i})

  .span-13.last
    - unless @featured_events.blank?
      .jmap#map{:style => "width: 500px; height: 390px;"}
  
  %hr.space
  
  .popular.cities
    == Browse Popular Cities
  
  - @cities.each do |city|
    - klasses = ["locality"].push(cycle('even', 'odd'))
    %span.small{:style => "white-space: nowrap; font-weight: bold; font-size: 1.7em; margin-right: 3px;"}= link_to city.name, url_for(:controller => 'search', :action => 'city', :country => @country, :state => city.state, :city => city), :class => klasses.join(" ")

  %hr.space

  .popular.neighborhoods
    == Browse Popular Neighborhoods

  - @neighborhoods.each do |hood|
    - klasses = ["locality"].push(cycle('even', 'odd'))
    - city    = hood.city
    %span.small{:style => "white-space: nowrap; font-weight: bold; font-size: 1.7em; margin-right: 3px;"}= link_to hood.name, url_for(:controller => 'search', :action => 'neighborhood', :country => @country, :state => city.state, :city => city, :neighborhood => hood), :class => klasses.join(" ")
        