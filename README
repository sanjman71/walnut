== Walnut Installation

To get the application up and running:

1. Initialize the database:
  - rake init:all

2. Import localeze data.
  - Import records by city
    - rake data:import_records CITY='Chicago' STATE='IL'      # 8700
    - rake data:import_records CITY='Charlotte' STATE='NC'    # 3726
    - rake data:import_records CITY='New York' STATE='NY'     # 2053

    - rake data:import_records CITY='Austin' STATE='TX'       # 2373
    - rake data:import_records CITY='Tampa' STATE='FL'        # 2556
    - rake data:import_records CITY='Philadelphia' STATE='PA' # 3496
    - rake data:import_records CITY='Pittsburgh' STATE='PA'   # 2023
    - rake data:import_records CITY='Sacramento' STATE='CA'   # 2451
    - rake data:import_records CITY='Boston' STATE='MA'       # 1366
    
  - Import records by cbsa
    - rake data:import_records CBSA=16980
  
  * Note: check error logs in log/localeze.error.log
  
3. Add tags by mapping localeze categories to local tag groups
  - rake data:import_tags

4. Import neighborhoods
  - rake init:urban_neighborhoods CITY='Chicago' STATE='IL'
  - rake init:urban_neighborhoods CITY='Charlotte' STATE='NC'

5. Import and map event categories, event venues and events.
  - rake events:init
  - rake events:import_category_tags
  - rake events:map_venues
  - rake events:import_venue_events
  
5. Build the sphinx index, without re-creating the configuration file:
  - rake ts:index
  
6. Start the sphinx dameon:
  - rake ts:start


== Localeze Installation

Instructions for importing localeze data into the database localeze_#{RAILS_ENV}.

0. Create the database 

1. Import the shared tables used by company-specific data
  - rake localeze:shared:import_categories
  x rake localeze:shared:import_chains  # this dies because of an 'illegal quoting' error on line 188
  - navicat import chains file
  
2. Import the company specific tables
  - load base records ...
    - rake localeze:company:import_base_records CBSA=16980 LIMIT=10
    * or
    - navicat settings
      - import as .txt file with '|' separator
      - use default field mappings
  
  - load company attributes
    - navicat settings:
      - import as .txt file with '|' separator
      - no id field
      - field1 is base_record_id 
      - skip field2
    
  - load company headings
    - navicat settings:
      - import as .txt file with '|' separator
      - no id field
      - field1 is base_record_id 

== MySQL Cleanup

The msyql data directory (/usr/local/mysql/data) was taking up a lot of space.  Here's how I cleaned it up:

1. Stop mysqld
  - sudo /Library/StartupItems/MySQLCOM/MySQLCOM stop

2. Remove innodb data files
  - rm /usr/local/mysql/data/ibdata1
  - rm /usr/local/mysql/data/ib_logfile[0,1]

3. Remove crash recovery binary update logs
  - rm /usr/local/msyql/data/mysql-bin.00*

4. Changed mysql configuration (/etc/my.cnf) to create a file per innodb table
  - added innodb_file_per_table = 1 to [msyqld] section

5. Start mysqld
  - sudo /Library/StartupItems/MySQLCOM/MySQLCOM start

